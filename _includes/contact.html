<section id="contact">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h3 class="section-heading">Questions? Comments? Concerns?</h3>
        <h3 class="section-subheading text-muted">Send us a message to let us know!</h3>
      </div>
    </div>
    <div class="row">
      <script>
        $(function() {
            $("#contactForm").find("input,textarea").jqBootstrapValidation({
        preventSubmit: true,
        submitSuccess: function($form, event) {
            event.preventDefault(); // prevent default submit behaviour
            // get values from FORM
            var email = $("#contactForm").find("#contact-email").val();
            var subject = $("#contactForm").find("#contact-subject").val();
            if(subject.length === 0) {
                subject = "[MinneHack] " + email;
            } else {
                subject = "[MinneHack] " + subject;
            }
            var message = $("#contactForm").find("#contact-text").val();

            console.log("Sending email...");

            $.ajax({
                url: "https://formspree.io/acm@umn.edu",
                method: "POST",
                crossDomain: true,
                dataType: "json",
                data: {
                    'body': message,
                    '_replyto': email,
                    '_subject': subject,
                },
                cache: false,
                success: function() {
                    $('#contact-status').html(`
                        <div class="alert alert-success">
                          <strong>Thanks, your message has been sent!</strong>
                          <button type="button" class="close" data-dismiss="alert"
                                  aria-hidden="true">
                            &times;
                          </button>
                        </div>
                        `);
                    /*
                    $('#contact-status').html("<div class='alert alert-success'>");
                    $('#contact-status > .alert-success').html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;")
                        .append("</button>");
                    $('#contact-status > .alert-success')
                        .append("<strong>Your message has been sent. </strong>");
                    $('#contact-status > .alert-success')
                        .append('</div>');

                    //clear all fields
                    $('#contactForm').trigger("reset");
                    */
                },
                error: function(xhr, error, exception) {
                    // Fail message
                    $('#contact-status').html(`
                        <div class="alert alert-danger">
                          <strong>
                            Sorry, your message failed to send.
                            Please try again later.
                          </strong>
                          <button type="button" class="close" data-dismiss="alert"
                                  aria-hidden="true">
                            &times;
                          </button>
                        </div>
                        `);
                    /*
                    $('#contact-status').html("<div class='alert alert-danger'>");
                    $('#contact-status > .alert-danger').html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;")
                        .append("</button>");
                    $('#contact-status > .alert-danger').append("<strong>Sorry " + firstName + ", it seems that our mail server is not responding. Please try again later!");
                    $('#contact-status > .alert-danger').append('</div>');
                    */
                },
            })
        },
        filter: function() {
            return $(this).is(":visible");
        },
                        });
                        });
      </script>
      <div class="col-lg-12">
        <form name="sentMessage" id="contactForm" class="text-center">
          <!--
              Using asterisks here for indicating required fields is
              _not_ ideal; neither are the <b> tags surrounding them.
              Should replace this with more responsive indicator of
              invalidity.
            -->          
          <div class="form-group">
            <label for="contact-email">Your Email Address<b>*</b></label>
            <input required type="text" name="email" id="contact-email"
                   class="form-control" placeholder="Email Address">
          </div>
          <div class="form-group">
            <label for="contact-subject">Subject</label>
            <input type="text" name="subject" id="contact-subject"
                   class="form-control" placeholder="Subject">
           </div>
          <div class="form-group">
            <label for="contact-text">Your Message<b>*</b></label>
            <textarea required name="message" id="contact-text"
                      class="form-control" placeholder="Your Message"></textarea>
          </div>
          <div id="contact-status">
            <!-- Will be filled with success/error messages. -->
          </div>
          <aside><small>[*] indicates a required field</small></aside>
          <button type="submit" class="btn btn-xl">Send Message</button>
          <!--
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Your Name *" id="name" required data-validation-required-message="Please enter your name.">
                <p class="help-block text-danger"></p>
                
                <input type="email" class="form-control" placeholder="Your Email *" id="email" required data-validation-required-message="Please enter your email address.">
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <textarea class="form-control" placeholder="Your Message *" id="message" required data-validation-required-message="Please enter a message."></textarea>
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-lg-12 text-center">
              <div id="contact-status"></div>
              <button type="submit" class="btn btn-xl">Send</button>
            </div>
          </div>
          -->
        </form>
      </div>
    </div>
  </div>
</section>
